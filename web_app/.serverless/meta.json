{
  "/Users/mks/Epitech/TEK 6/cloud/pixel-cloud/web_app/serverless.yml": {
    "versionFramework": "4.28.0",
    "servicePath": "/Users/mks/Epitech/TEK 6/cloud/pixel-cloud/web_app/serverless.yml",
    "serviceConfigFileName": "serverless.yml",
    "service": {
      "service": "pixel-frontend",
      "frameworkVersion": "4",
      "provider": {
        "name": "aws",
        "runtime": "nodejs20.x",
        "region": "eu-west-3",
        "stage": "cloud",
        "deploymentBucket": null,
        "versionFunctions": true,
        "deploymentBucketObject": {
          "blockPublicAccess": true
        }
      },
      "plugins": [
        "serverless-finch"
      ],
      "custom": {
        "stage": "cloud",
        "region": "eu-west-3",
        "frontendBucketName": "pixel-frontend-cloud-475852407423",
        "client": {
          "bucketName": "pixel-frontend-cloud-475852407423",
          "distributionFolder": "dist",
          "indexDocument": "index.html",
          "errorDocument": "index.html",
          "manageResources": false,
          "region": "eu-west-3",
          "uploadOrder": [
            ".*\\.js$",
            ".*\\.css$",
            "index\\.html"
          ]
        }
      },
      "resources": {
        "Resources": {
          "FrontendBucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
              "BucketName": "pixel-frontend-cloud-475852407423",
              "AccessControl": "Private",
              "BucketEncryption": {
                "ServerSideEncryptionConfiguration": [
                  {
                    "ServerSideEncryptionByDefault": {
                      "SSEAlgorithm": "AES256"
                    }
                  }
                ]
              },
              "OwnershipControls": {
                "Rules": [
                  {
                    "ObjectOwnership": "BucketOwnerEnforced"
                  }
                ]
              },
              "PublicAccessBlockConfiguration": {
                "BlockPublicAcls": true,
                "IgnorePublicAcls": true,
                "BlockPublicPolicy": true,
                "RestrictPublicBuckets": true
              },
              "VersioningConfiguration": {
                "Status": "Suspended"
              },
              "Tags": [
                {
                  "Key": "Service",
                  "Value": "pixel-frontend"
                },
                {
                  "Key": "Stage",
                  "Value": "cloud"
                }
              ]
            }
          },
          "CloudFrontOAI": {
            "Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity",
            "Properties": {
              "CloudFrontOriginAccessIdentityConfig": {
                "Comment": "Frontend access identity for pixel-frontend"
              }
            }
          },
          "FrontendBucketPolicy": {
            "Type": "AWS::S3::BucketPolicy",
            "Properties": {
              "Bucket": {
                "Ref": "FrontendBucket"
              },
              "PolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Sid": "AllowCloudFrontRead",
                    "Effect": "Allow",
                    "Principal": {
                      "CanonicalUser": {
                        "Fn::GetAtt": [
                          "CloudFrontOAI",
                          "S3CanonicalUserId"
                        ]
                      }
                    },
                    "Action": "s3:GetObject",
                    "Resource": {
                      "Fn::Sub": "arn:aws:s3:::${FrontendBucket}/*"
                    }
                  }
                ]
              }
            }
          },
          "SecurityHeadersPolicy": {
            "Type": "AWS::CloudFront::ResponseHeadersPolicy",
            "Properties": {
              "ResponseHeadersPolicyConfig": {
                "Name": "pixel-frontend-cloud-security-headers",
                "SecurityHeadersConfig": {
                  "ContentSecurityPolicy": {
                    "ContentSecurityPolicy": "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://*.execute-api.eu-west-3.amazonaws.com wss://*.execute-api.eu-west-3.amazonaws.com; font-src 'self' data:;",
                    "Override": true
                  },
                  "StrictTransportSecurity": {
                    "AccessControlMaxAgeSec": 31536000,
                    "IncludeSubdomains": true,
                    "Preload": true,
                    "Override": true
                  },
                  "ContentTypeOptions": {
                    "Override": true
                  },
                  "FrameOptions": {
                    "FrameOption": "DENY",
                    "Override": true
                  },
                  "ReferrerPolicy": {
                    "ReferrerPolicy": "same-origin",
                    "Override": true
                  },
                  "XSSProtection": {
                    "ModeBlock": true,
                    "Protection": true,
                    "Override": true
                  }
                }
              }
            }
          },
          "FrontendDistribution": {
            "Type": "AWS::CloudFront::Distribution",
            "Properties": {
              "DistributionConfig": {
                "Comment": "Pixel War Frontend cloud",
                "Enabled": true,
                "HttpVersion": "http2",
                "DefaultRootObject": "index.html",
                "PriceClass": "PriceClass_100",
                "Origins": [
                  {
                    "Id": "frontendOrigin",
                    "DomainName": {
                      "Fn::GetAtt": [
                        "FrontendBucket",
                        "RegionalDomainName"
                      ]
                    },
                    "S3OriginConfig": {
                      "OriginAccessIdentity": {
                        "Fn::Sub": "origin-access-identity/cloudfront/${CloudFrontOAI}"
                      }
                    }
                  }
                ],
                "DefaultCacheBehavior": {
                  "AllowedMethods": [
                    "GET",
                    "HEAD",
                    "OPTIONS"
                  ],
                  "CachedMethods": [
                    "GET",
                    "HEAD"
                  ],
                  "Compress": true,
                  "TargetOriginId": "frontendOrigin",
                  "ViewerProtocolPolicy": "redirect-to-https",
                  "CachePolicyId": "658327ea-f89d-4fab-a63d-7e88639e58f6",
                  "ResponseHeadersPolicyId": {
                    "Ref": "SecurityHeadersPolicy"
                  }
                },
                "CustomErrorResponses": [
                  {
                    "ErrorCode": 403,
                    "ErrorCachingMinTTL": 0,
                    "ResponseCode": 200,
                    "ResponsePagePath": "/index.html"
                  },
                  {
                    "ErrorCode": 404,
                    "ErrorCachingMinTTL": 0,
                    "ResponseCode": 200,
                    "ResponsePagePath": "/index.html"
                  }
                ],
                "Restrictions": {
                  "GeoRestriction": {
                    "RestrictionType": "none"
                  }
                },
                "ViewerCertificate": {
                  "CloudFrontDefaultCertificate": true
                }
              }
            }
          }
        },
        "Outputs": {
          "FrontendBucketName": {
            "Description": "Private bucket holding the SPA assets",
            "Value": {
              "Ref": "FrontendBucket"
            },
            "Export": {
              "Name": "pixel-frontend-cloud-bucket"
            }
          },
          "FrontendDistributionId": {
            "Description": "CloudFront distribution id",
            "Value": {
              "Ref": "FrontendDistribution"
            },
            "Export": {
              "Name": "pixel-frontend-cloud-distribution-id"
            }
          },
          "FrontendDistributionDomain": {
            "Description": "CloudFront public domain",
            "Value": {
              "Fn::GetAtt": [
                "FrontendDistribution",
                "DomainName"
              ]
            },
            "Export": {
              "Name": "pixel-frontend-cloud-distribution-domain"
            }
          }
        }
      }
    },
    "provider": {
      "name": "aws",
      "runtime": "nodejs20.x",
      "region": "eu-west-3",
      "stage": "cloud",
      "deploymentBucket": null,
      "versionFunctions": true,
      "deploymentBucketObject": {
        "blockPublicAccess": true
      }
    },
    "dashboard": {
      "isEnabledForService": false,
      "requiredAuthentication": false,
      "orgFeaturesInUse": null,
      "orgObservabilityIntegrations": null,
      "serviceAppId": null,
      "serviceProvider": null,
      "instanceParameters": null
    },
    "serviceRawFile": "service: pixel-frontend\nframeworkVersion: \"4\"\n\nprovider:\n  name: aws\n  runtime: nodejs20.x\n  region: eu-west-3\n  stage: ${opt:stage, 'cloud'}\n  deploymentBucket:\n    blockPublicAccess: true\n\nplugins:\n  - serverless-finch\n\ncustom:\n  stage: ${self:provider.stage}\n  region: ${self:provider.region}\n  frontendBucketName: ${self:service}-${self:custom.stage}-${aws:accountId}\n  client:\n    bucketName: ${self:custom.frontendBucketName}\n    distributionFolder: dist\n    indexDocument: index.html\n    errorDocument: index.html\n    manageResources: false\n    region: ${self:custom.region}\n    uploadOrder:\n      - \".*\\\\.js$\"\n      - \".*\\\\.css$\"\n      - \"index\\\\.html\"\n\nresources:\n  Resources:\n    FrontendBucket:\n      Type: AWS::S3::Bucket\n      Properties:\n        BucketName: ${self:custom.frontendBucketName}\n        AccessControl: Private\n        BucketEncryption:\n          ServerSideEncryptionConfiguration:\n            - ServerSideEncryptionByDefault:\n                SSEAlgorithm: AES256\n        OwnershipControls:\n          Rules:\n            - ObjectOwnership: BucketOwnerEnforced\n        PublicAccessBlockConfiguration:\n          BlockPublicAcls: true\n          IgnorePublicAcls: true\n          BlockPublicPolicy: true\n          RestrictPublicBuckets: true\n        VersioningConfiguration:\n          Status: Suspended\n        Tags:\n          - Key: Service\n            Value: ${self:service}\n          - Key: Stage\n            Value: ${self:custom.stage}\n\n    CloudFrontOAI:\n      Type: AWS::CloudFront::CloudFrontOriginAccessIdentity\n      Properties:\n        CloudFrontOriginAccessIdentityConfig:\n          Comment: Frontend access identity for ${self:service}\n\n    FrontendBucketPolicy:\n      Type: AWS::S3::BucketPolicy\n      Properties:\n        Bucket: !Ref FrontendBucket\n        PolicyDocument:\n          Version: \"2012-10-17\"\n          Statement:\n            - Sid: AllowCloudFrontRead\n              Effect: Allow\n              Principal:\n                CanonicalUser: !GetAtt CloudFrontOAI.S3CanonicalUserId\n              Action: s3:GetObject\n              Resource: !Sub \"arn:aws:s3:::${FrontendBucket}/*\"\n\n    SecurityHeadersPolicy:\n      Type: AWS::CloudFront::ResponseHeadersPolicy\n      Properties:\n        ResponseHeadersPolicyConfig:\n          Name: ${self:service}-${self:custom.stage}-security-headers\n          SecurityHeadersConfig:\n            ContentSecurityPolicy:\n              ContentSecurityPolicy: \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://*.execute-api.eu-west-3.amazonaws.com wss://*.execute-api.eu-west-3.amazonaws.com; font-src 'self' data:;\"\n              Override: true\n            StrictTransportSecurity:\n              AccessControlMaxAgeSec: 31536000\n              IncludeSubdomains: true\n              Preload: true\n              Override: true\n            ContentTypeOptions:\n              Override: true\n            FrameOptions:\n              FrameOption: DENY\n              Override: true\n            ReferrerPolicy:\n              ReferrerPolicy: same-origin\n              Override: true\n            XSSProtection:\n              ModeBlock: true\n              Protection: true\n              Override: true\n\n    FrontendDistribution:\n      Type: AWS::CloudFront::Distribution\n      Properties:\n        DistributionConfig:\n          Comment: Pixel War Frontend ${self:custom.stage}\n          Enabled: true\n          HttpVersion: http2\n          DefaultRootObject: index.html\n          PriceClass: PriceClass_100\n          Origins:\n            - Id: frontendOrigin\n              DomainName: !GetAtt FrontendBucket.RegionalDomainName\n              S3OriginConfig:\n                OriginAccessIdentity: !Sub \"origin-access-identity/cloudfront/${CloudFrontOAI}\"\n          DefaultCacheBehavior:\n            AllowedMethods:\n              - GET\n              - HEAD\n              - OPTIONS\n            CachedMethods:\n              - GET\n              - HEAD\n            Compress: true\n            TargetOriginId: frontendOrigin\n            ViewerProtocolPolicy: redirect-to-https\n            CachePolicyId: 658327ea-f89d-4fab-a63d-7e88639e58f6 # CachingOptimized managed policy\n            ResponseHeadersPolicyId: !Ref SecurityHeadersPolicy\n          CustomErrorResponses:\n            - ErrorCode: 403\n              ErrorCachingMinTTL: 0\n              ResponseCode: 200\n              ResponsePagePath: /index.html\n            - ErrorCode: 404\n              ErrorCachingMinTTL: 0\n              ResponseCode: 200\n              ResponsePagePath: /index.html\n          Restrictions:\n            GeoRestriction:\n              RestrictionType: none\n          ViewerCertificate:\n            CloudFrontDefaultCertificate: true\n\n  Outputs:\n    FrontendBucketName:\n      Description: Private bucket holding the SPA assets\n      Value: !Ref FrontendBucket\n      Export:\n        Name: ${self:service}-${self:custom.stage}-bucket\n    FrontendDistributionId:\n      Description: CloudFront distribution id\n      Value: !Ref FrontendDistribution\n      Export:\n        Name: ${self:service}-${self:custom.stage}-distribution-id\n    FrontendDistributionDomain:\n      Description: CloudFront public domain\n      Value: !GetAtt FrontendDistribution.DomainName\n      Export:\n        Name: ${self:service}-${self:custom.stage}-distribution-domain\n",
    "command": [
      "client",
      "deploy"
    ],
    "options": {},
    "orgId": "ccf716c1-3805-45c6-b5d2-c4f537877c3c",
    "orgName": "mks00",
    "userId": "C6W23F67wqs1PR63PQ",
    "userName": "mks00",
    "serviceProviderAwsAccountId": "475852407423",
    "serviceProviderAwsCfStackName": "pixel-frontend-cloud",
    "serviceProviderAwsCfStackId": "arn:aws:cloudformation:eu-west-3:475852407423:stack/pixel-frontend-cloud/c90328e0-d684-11f0-8c91-0a27e74cc74f",
    "serviceProviderAwsCfStackCreated": "2025-12-11T11:30:24.594Z",
    "serviceProviderAwsCfStackUpdated": null,
    "serviceProviderAwsCfStackStatus": "CREATE_COMPLETE",
    "serviceProviderAwsCfStackOutputs": [
      {
        "OutputKey": "FrontendDistributionDomain",
        "OutputValue": "dgdu647cjkm94.cloudfront.net",
        "Description": "CloudFront public domain",
        "ExportName": "pixel-frontend-cloud-distribution-domain"
      },
      {
        "OutputKey": "FrontendBucketName",
        "OutputValue": "pixel-frontend-cloud-475852407423",
        "Description": "Private bucket holding the SPA assets",
        "ExportName": "pixel-frontend-cloud-bucket"
      },
      {
        "OutputKey": "FrontendDistributionId",
        "OutputValue": "E2IPZS4R2C5YAA",
        "Description": "CloudFront distribution id",
        "ExportName": "pixel-frontend-cloud-distribution-id"
      },
      {
        "OutputKey": "ServerlessDeploymentBucketName",
        "OutputValue": "serverless-framework-deployments-eu-west-3-b15ad9a8-fdc6",
        "ExportName": "sls-pixel-frontend-cloud-ServerlessDeploymentBucketName"
      }
    ]
  }
}